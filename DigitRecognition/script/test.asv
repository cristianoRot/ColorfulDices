% test.m - Cristiano Rotunno 914317

function out = test()
    close all;
    image = imread('../data/img1.png');
    mask = imread('../data/mask1.png');    
    
    dices = extractDices(image, mask);
    numDices = length(dices);
    
    for i = 1:numDices
        [KMlabels, labels, out] = extractPixelsNumber(dices{i});
        vector = extractFeatures(out);

        number = predict(holes, pa);

        % Debug.
        
        figure;
        subplot(2, 4, 1);
        imshow(dices{i});
        title('Original Dice');

        subplot(2, 4, 2);
        imagesc(KMlabels);
        title('K-Means Labels');
        axis image;

        subplot(2, 4, 3);
        imagesc(labels);
        title('Filtered Components');
        axis image;
        
        subplot(2, 4, 4);
        imshow(out);
        title('Final Selection');
        
        data = {'Holes', holes; 'P^2/A', pa; 'Predicted', number};
        columnNames = {'Feature', 'Value'};

        uitable('Data', data, ...
                'ColumnName', columnNames, ...
                'RowName', [], ...
                'Units', 'normalized', ...
                'Position', [0.3, 0.1, 0.4, 0.3]);
    end
    
    out = dices;
end